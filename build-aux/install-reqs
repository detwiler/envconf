#! /bin/sh

OS_RELEASE_FILE=${OS_RELEASE_FILE:-/etc/os-release}
SUDO=`which sudo`

pkgs_common='
cmake
ctags
curl
findutils
gcc
grep
make
'

pkgs_alpine='
aws-cli
clang-dev
g++
python3-dev
vim
'

pkgs_fedora='
awscli
clang-devel
gcc-c++
python3-devel
vim-enhanced
'

test -r $OS_RELEASE_FILE || exit

os_id=`sed -ne 's/^ID=//p' $OS_RELEASE_FILE`

test -n $os_id || exit

case $os_id in
    alpine) $SUDO apk add $pkgs_common $pkgs_alpine;;
    fedora) $SUDO dnf --assumeyes install $pkgs_common $pkgs_fedora;;
esac

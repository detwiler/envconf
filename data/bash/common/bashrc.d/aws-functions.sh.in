# AWS functions

function __aws_acct()
{
  if [[ -h @AWS_CREDENTIALS_FILE@ ]]; then
    account="$(basename $(readlink --canonicalize @AWS_CREDENTIALS_FILE@))"
    printf "(aws:$account)"
  fi
} # __aws_acct()

for account in $(command ls @AWS_ACCOUNT_DIR@/* 2>/dev/null | @GREP@ --invert-match config 2>/dev/null); do
  acct=$(basename $account)
  if [[ ! -h $account ]]; then
    eval "aws_$acct() { @LN_S@ --force $account @AWS_CREDENTIALS_FILE@; }"
    export -f aws_$acct
  fi
done
unset account acct
